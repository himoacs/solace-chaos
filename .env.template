# .env.template (Two-VPN Architecture)
# Copy this to .env and configure with your actual values

# Solace Broker Configuration
SOLACE_BROKER_HOST=your_broker_host_here
SOLACE_BROKER_PORT=55554
SOLACE_SEMP_URL=https://your_broker_host_here:1943
SOLACE_ADMIN_USER=admin
SOLACE_ADMIN_PASSWORD=your_admin_password_here

# MARKET_DATA VPN Users (Market data and integration)
MARKET_DATA_FEED_USER=market-feed@market_data
MARKET_DATA_FEED_PASSWORD=market_feed_pass
MARKET_DATA_CONSUMER_USER=market-consumer@market_data
MARKET_DATA_CONSUMER_PASSWORD=market_consumer_pass
INTEGRATION_USER=integration-feed@market_data
INTEGRATION_PASSWORD=integration_pass
RESTRICTED_MARKET_USER=restricted-market@market_data
RESTRICTED_MARKET_PASSWORD=restricted_market_pass
MARKET_CONSUMER_USER=market-consumer@market_data
MARKET_CONSUMER_PASSWORD=market_consumer_pass

# TRADING VPN Users (Order processing and settlement)
ORDER_ROUTER_USER=order-router@trading
ORDER_ROUTER_PASSWORD=order_router_pass
TRADE_PROCESSOR_USER=trade-processor@trading
TRADE_PROCESSOR_PASSWORD=trade_processor_pass
CHAOS_GENERATOR_USER=chaos-generator@trading
CHAOS_GENERATOR_PASSWORD=chaos_generator_pass
RESTRICTED_TRADE_USER=restricted-trade@trading
RESTRICTED_TRADE_PASSWORD=restricted_trade_pass

# VPN Configuration
MARKET_DATA_VPN=market_data
TRADING_VPN=trading

# Cross-VPN Bridge Configuration (disabled for simplified setup)
ENABLE_CROSS_VPN_BRIDGE=false

# SDKPerf Configuration (AUTO-DETECTED from ./sdkperf-tools/)
# Download SDKPerf ZIP file to ./sdkperf-tools/ directory before running bootstrap
SDKPERF_TOOLS_DIR=./sdkperf-tools
SDKPERF_EXTRACT_DIR=./sdkperf-tools/extracted
SDKPERF_SCRIPT_PATH=./sdkperf-tools/extracted/sdkperf-jcsmp-8.4.19.7/sdkperf_java.sh

# Terraform Configuration (AUTO-INSTALLED if missing)
TF_VAR_solace_broker_url=${SOLACE_SEMP_URL}
TF_VAR_solace_admin_user=${SOLACE_ADMIN_USER}
TF_VAR_solace_admin_password=${SOLACE_ADMIN_PASSWORD}
TF_VAR_enable_cross_vpn_bridge=${ENABLE_CROSS_VPN_BRIDGE}
TERRAFORM_AUTO_APPROVE=true

# Rate configuration (msg/sec)
WEEKDAY_RATE=1000
WEEKDAY_MARKET_DATA_RATE=1000
WEEKEND_MARKET_DATA_RATE=10
WEEKDAY_TRADE_FLOW_RATE=500
WEEKEND_TRADE_FLOW_RATE=5

# Infrastructure Configuration
SETUP_VPNS=true
SETUP_QUEUES=true
SETUP_USERS=true
SETUP_BRIDGES=true
VALIDATE_CONNECTIVITY=true

# Logging Configuration
SDKPERF_BASE_LOG_PATH=./logs
AUTO_CREATE_LOG_DIRS=true

# Consumer Configuration (for exclusive queues - max 1 consumer per queue)
MAX_CONSUMERS_PER_QUEUE=1
DEFAULT_DRAIN_CONSUMERS=1

# Master Orchestrator Configuration
# Health check interval in seconds (5 minutes)
HEALTH_CHECK_INTERVAL=300
# Consumer cleanup frequency (every 10 health checks)
CONSUMER_CLEANUP_FREQUENCY=10

# Log Trimming Configuration
# Trim logs every N health checks (default: 5 = ~25 minutes)
LOG_TRIM_FREQUENCY=5
# Maximum log file size in MB before trimming (default: 50MB)
LOG_MAX_SIZE_MB=50

# Broker Type Configuration
# Options: 'software', 'appliance', or 'auto' (default: auto-detect via SEMP)
SOLACE_BROKER_TYPE=auto

# Infrastructure Provisioning Method
# Options: 'semp', 'terraform', or 'auto'
# - auto: Prompt during bootstrap (recommended for first run)
# - semp: Use SEMP API directly (no Terraform required, avoids version issues)
# - terraform: Use Terraform for infrastructure as code
PROVISIONING_METHOD=auto

# Frequency Configuration (to reduce chaos testing noise)
# Traffic generator restart interval in seconds (default: 3600 = 1 hour)
# Recommended for less noise: 7200 (2 hours) or 14400 (4 hours)
TRAFFIC_RESTART_INTERVAL=3600

# Queue killer attack cycle interval in seconds (default: 3600 = 1 hour)
# Recommended for less noise: 7200 (2 hours) or 14400 (4 hours)
QUEUE_KILLER_CYCLE_INTERVAL=3600

# Bridge attack duration in seconds (default: 600 = 10 minutes)
# Recommended for less noise: 300 (5 minutes)
BRIDGE_ATTACK_DURATION=600

# Bridge sleep interval between attacks in seconds (default: 300 = 5 minutes)
# Recommended for less noise: 900 (15 minutes) or 1800 (30 minutes)
BRIDGE_SLEEP_INTERVAL=300

# Orchestrator main loop sleep interval in seconds (default: 30)
# Reduce for faster health checks, increase to reduce CPU usage
ORCHESTRATOR_SLEEP_INTERVAL=30